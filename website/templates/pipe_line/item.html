{% extends "base.html" %} {% block title %}Pipe Line{% endblock %} 

{% block content %}
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/form_style.css') }}" />
<script type="text/javascript">
    function deleteData() {
        if(confirm("Are you sure to delete?")) {
            var $form = $('<form/>', {
                    action: '/pipe_line/delete',
                    method: 'POST'
                });
            $('<input>').attr({
                type: 'hidden',
                name: 'delete_id',
                value: '{{ form.id.data }}'
            }).appendTo($form);

            $form.appendTo('body').submit();
        }
    }
    function createWithReference() {
        location.href = '/pipe_line/create?refer={{ form.id.data }}';
    }
</script>

<br/> 
<h2 align="center">Pipe Line Display</h2>
<br />

<br />
<div class="form-group mx-sm-3 mb-2">

    <div class="input-container">
        <div class="columnlabel">
            {{ form.shared.label }}

        </div>
        <div class="columninput uneditable">
            
        </div>
        <div class="columnlabel">
            {{ form.division.label }}
        </div>
        <div class="columninput">
            {{ form.division.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.entity.label }}
        </div>
        <div class="columninput">
            {{ form.entity.data }}
        </div>
        <div class="columnlabel">
            {{ form.region.label }}
        </div>
        <div class="columninput">
            {{ form.region.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.owner.label }}
        </div>
        <div class="columninput">
            {{ form.owner.data }}
        </div>
        <div class="columnlabel">
            {{ form.product.label }}
        </div>
        <div class="columninput">
            {{ form.product.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.product_type.label }}
        </div>
        <div class="columninput">
            {{ form.product_type.data }}
        </div>
        <div class="columnlabel">
            {{ form.customer.label }}
        </div>

        <div class="columninput">
            {{ form.customer.data }}  
        </div>
    </div>

    <div class="input-container">

        <div class="columnlabel">
            {{ form.customer_prospect.label }}
        </div>
        <div class="columninput">
            {{ form.customer_prospect.data }}
        </div>
        <div class="columnlabel">
            {{ form.application.label }}
        </div>
        <div class="columninput">
            {{ form.application.data }}
        </div>

    </div>

    <div class="input-container">

        <div class="columnlabel">
            {{ form.status.label }}
        </div>
        <div class="columninput">
            {{ form.status.data }}
        </div>
        <div class="columnlabel">
            {{ form.project.label }}
        </div>
        <div class="columninput">
            {{ form.project.data }}
        </div>
    </div>

    <div class="input-container">
        <div class="columnlabel">
            {{ form.priority.label }}
        </div>
        <div class="columninput">
            {{ form.priority.data }}
        </div>
        <div class="columnlabel">
            {{ form.refrigerant.label }}
        </div>
        <div class="columninput">
            {{ form.refrigerant.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.contact.label }}
        </div>
        <div class="columninput">
            
        </div>

        <div class="columnlabel">
            {{ form.resolved.label }}
        </div>
        <div class="columninput">
            {{ form.resolved.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.model.label }}
        </div>
        <div class="columninput">
            {{ form.model.data }}
        </div>

        <div class="columnlabel">
            {{ form.system_models.label }}
        </div>
        <div class="columninput">
            {{ form.system_models.data }}
        </div>
    </div>
    <div class="input-container">
        <div class="columnlabel">
            {{ form.target_spec.label }}
        </div>
        <div class="columninput">
            {{ form.target_spec.data }}
        </div>
        <div class="columnlabel">
            {{ form.comp_model.label }}
        </div>
        <div class="columninput">
            {{ form.comp_model.data }}
        </div>
    </div>
    
    <div class="input-container">

        <div class="columnlabel">
            {{ form.scope.label }}
        </div>
        <div class="columninput">
            {{ form.scope.data }}
        </div>
        <div class="columnlabel">
            {{ form.remark.label }}
        </div>
        <div class="columninput">
            
        </div>

    </div>


   
    <hr>

    <div class="detail-section" id="detail-section">
        <div class="detail-header">
            <div class="detail-column width1">
                Date
            </div>

            <div class="detail-column width3">
                Note
            </div>

        </div>

        {% if form.items %}
            {# UPDATED LINE BELOW #}
            {% for item_form in form.items | sort(attribute='date.data', reverse=True) %}
                <div class="detail-row">
                    <div class="detail-column width1">
                        {{ item_form.date.data }}
                    </div>

                    <div class="detail-column width3">
                        {{ item_form.note.data }}
                    </div>

                </div>
            {% endfor %}
        {% else %}
            <p>No items to display.</p>
        {% endif %}


    </div>

    <hr>

</div>
{% endblock %}